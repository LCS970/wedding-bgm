<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>청첩장 브금 연결</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      font-size: 1.2rem;
      background: #fff;
    }
    #status {
      margin-top: 1.2rem;
      color: #444;
    }
  </style>
</head>
<body>
  <div>
    <p>어디든 클릭하면 브금 재생 후 청첩장으로 이동합니다 🎵</p>
    <p id="status">브금 재생 대기 중...</p>
  </div>

  <audio id="bgm" loop>
    <source src="https://lcs970.github.io/wedding-bgm/bgm.mp3" type="audio/mpeg">
  </audio>

  <script>
    const status = document.getElementById("status");
    let started = false;

    document.addEventListener("click", () => {
      if (started) return;
      started = true;

      const bgm = document.getElementById("bgm");
      const playAttempt = bgm.play();

      if (playAttempt !== undefined) {
        playAttempt
          .then(() => {
            status.textContent = "✅ 브금 재생 성공! 1초 후 이동합니다...";
            setTimeout(() => {
              window.location.href = "https://scenekoong.com/invitations/wedding/quqKcB";
            }, 1000); // 1초 후 이동
          })
          .catch((err) => {
            status.textContent = "❌ 브금 재생 실패: " + err.message + " - 그래도 이동합니다.";
            console.warn("브금 재생 실패:", err);
            setTimeout(() => {
              window.location.href = "https://scenekoong.com/invitations/wedding/quqKcB";
            }, 1000);
          });
      } else {
        status.textContent = "⚠️ 브라우저가 재생 시도를 막았습니다. 1초 후 이동합니다.";
        setTimeout(() => {
          window.location.href = "https://scenekoong.com/invitations/wedding/quqKcB";
        }, 1000);
      }
    });
  </script>
</body>
</html>
